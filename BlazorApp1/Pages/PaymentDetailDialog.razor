@using MudBlazor

<MudDialog MaxWidth="MaxWidth.Small" FullWidth="true">

    <DialogContent>

        <!-- HEADER -->
        <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2" Class="mb-2">
            <MudIcon Icon="@Icons.Material.Filled.ReceiptLong"
                     Color="Color.Primary"
                     Size="Size.Medium" />
            <MudText Typo="Typo.h6">Payment Detail</MudText>
        </MudStack>

        <MudDivider Class="mb-4" />

        <!-- CONTENT -->
        <MudGrid>

            <MudItem xs="12" md="6">
                <MudText Typo="Typo.caption">User</MudText>
                <MudText Typo="Typo.body1">@Payment.UserName</MudText>
            </MudItem>

            <MudItem xs="12" md="6">
                <MudText Typo="Typo.caption">Email</MudText>
                <MudText Typo="Typo.body1">@Payment.Email</MudText>
            </MudItem>

            <MudItem xs="12" md="6">
                <MudText Typo="Typo.caption">Payment Type</MudText>
                <MudText Typo="Typo.body1">@Payment.PaymentType</MudText>
            </MudItem>

            <MudItem xs="12" md="6">
                <MudText Typo="Typo.caption">Amount</MudText>
                <MudText Typo="Typo.h6" Color="Color.Success">
                    @Payment.Amount.ToString("N0") đ
                </MudText>
            </MudItem>

            <MudItem xs="12" md="6">
                <MudText Typo="Typo.caption">Status</MudText>
                <MudChip T="string"
                         Color="@GetStatusColor(Payment.Status)"
                         Variant="Variant.Filled"
                         Size="Size.Small">
                    @Payment.Status
                </MudChip>
            </MudItem>

            <MudItem xs="12" md="6">
                <MudText Typo="Typo.caption">Payment Method</MudText>
                <MudText Typo="Typo.body1">
                    @(Payment.PaymentMethod ?? "N/A")
                </MudText>
            </MudItem>

            <MudItem xs="12" md="6">
                <MudText Typo="Typo.caption">Transaction ID</MudText>
                <MudText Typo="Typo.body1">
                    @(Payment.TransactionId ?? "N/A")
                </MudText>
            </MudItem>

            <MudItem xs="12" md="6">
                <MudText Typo="Typo.caption">Expire Date</MudText>
                <MudText Typo="Typo.body1">
                    @(Payment.ExpireDate?.ToString("dd/MM/yyyy") ?? "N/A")
                </MudText>
            </MudItem>

        </MudGrid>

    </DialogContent>

    <DialogActions>
        <MudButton Variant="Variant.Filled"
                   Color="Color.Primary"
                   OnClick="Close">
            Close
        </MudButton>
    </DialogActions>

</MudDialog>

@code {

    [CascadingParameter]
    public IMudDialogInstance MudDialog { get; set; } = default!;

    [Parameter]
    public AdminPayments.PaymentViewModel Payment { get; set; } = default!;

    void Close()
    {
        MudDialog.Close();
    }

    private Color GetStatusColor(string status)
    {
        return status switch
        {
            "Success" => Color.Success,
            "Pending" => Color.Warning,
            "Failed" => Color.Error,
            _ => Color.Default
        };
    }
}
